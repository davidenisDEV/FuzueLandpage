<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fuzuê Bar - Bar e Comidinhas!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="config.js"></script>

    <style>
        body {
            font-family: 'Engebrechtre', serif;
            background-color: #084a9a; /* Cor de fallback caso a imagem não carregue */
            color: #fdebdf;
            scroll-behavior: smooth;
            /* Wallpaper global aplicado via JavaScript */
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
            background-attachment: fixed; /* Efeito parallax */
        }

        /* Cores secundárias */
        .text-accent-red { color: #a71c1b; }
        .bg-accent-red { background-color: #a71c1b; }
        .border-accent-red { border-color: #a71c1b; }

        .text-accent-gray { color: #3a3a3a; }
        .bg-accent-gray { background-color: #3a3a3a; }
        .border-accent-gray { border-color: #3a3a3a; }

        /* Fontes */
        .font-title {
            font-family: 'Engebrechtre', sans-serif;
        }

        .fixed-header {
            position: fixed;
            font-size: 18px;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background-color: rgba(8, 74, 154, 0.9);
            backdrop-filter: blur(10px);
            padding: 0.5rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .header-logo {
            height: 50px;
            width: auto;
        }

        .fixed-header nav ul li a {
            color: #fdebdf;
            font-family: 'Engebrechtre', sans-serif;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .fixed-header nav ul li a:hover {
            background-color: #a71c1b;
            color: #fdebdf;
        }
        .fixed-header nav ul li a.active {
            background-color: #a71c1b;
            color: #ffffff;
        }

        .hero-bg {
             /* Azul Fuzuê com 70% opacidade para permitir que o wallpaper do body apareça por baixo */
            background-color: rgba(8, 74, 154, 0.70);
            padding-top: 100px;
        }
        .home-logo {
            max-width: 300px;
            height: auto;
            margin-bottom: 1.5rem;
        }

        .section-title {
            color: #fdebdf;
            font-family: 'Engebrechtre', sans-serif;
            font-weight: 700;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 70px;
            height: 4px;
            background-color: #a71c1b;
            margin: 10px auto 0;
            border-radius: 2px;
        }

        .btn {
            transition: all 0.2s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-family: 'Engebrechtre', sans-serif;
            font-weight: 600;
            border-radius: 0.5rem;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        .btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background-color: #a71c1b;
            color: #fdebdf;
        }
        .btn-primary:hover { background-color: #8f1716; }
        .btn-primary:active { background-color: #721211; }

        .btn-secondary {
            background-color: #3a3a3a;
            color: #fdebdf;
        }
        .btn-secondary:hover { background-color: #2c2c2c; }
        .btn-secondary:active { background-color: #1e1e1e; }

        .dj-card {
            background-color: rgba(58, 58, 58, 0.3);
            border: 1px solid #3a3a3a;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            color: #fdebdf;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .dj-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 30px rgba(167, 28, 27, 0.3);
        }
        .dj-card h3 { color: #fdebdf; font-family: 'Engebrechtre', sans-serif;}
        .dj-card h3 a { color: #fdebdf; text-decoration: none; }
        .dj-card h3 a:hover { color: #f0a0a0; }
        .dj-card p { color: #e0c9be; }
        .dj-card .text-red-500 { color: #f0a0a0; }

        .scroll-animate {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .scroll-animate.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        audio { display: none; }

        .glowing-text {
            text-shadow: 0 0 8px rgba(167, 28, 27, 0.7), 0 0 10px rgba(167, 28, 27, 0.5);
        }

        .modal-input { color: #1F2937; }
        .modal-label { color: #374151; }
        #reserva-modal .bg-white { background-color: #f0f0f0; }
        #reserva-modal h2 { color: #a71c1b; font-family: 'Engebrechtre', sans-serif; }
        .quantidade-pessoas-field { display: block; }
        .quantidade-pessoas-field.hidden-field { display: none; }

        .carousel-container {
            position: relative;
            max-width: 900px; /* Aumentado para maior largura */
            height: 600px; /* Aumentado para maior altura */
            margin: 2rem auto;
            overflow: hidden;
            border-radius: 0.5rem;
        }
        .carousel-slide { display: none; height: 100%;}
        .carousel-slide.active { display: block; }
        .carousel-slide img {
            width: 100%;
            height: 100%; 
            object-fit: contain; 
            cursor: pointer;
        }
        .carousel-nav-buttons {
            text-align: center;
            margin-top: 1rem;
        }
        .carousel-prev, .carousel-next {
            cursor: pointer; position: relative; top: auto; width: auto;
            padding: 10px 15px; margin: 0 5px; color: #fdebdf;
            background-color: rgba(167, 28, 27, 0.7);
            font-weight: bold; font-size: 15px; transition: 0.3s ease;
            border-radius: 0.375rem; user-select: none; border: none;
            display: inline-block;
        }
        .carousel-prev:hover, .carousel-next:hover { background-color: #a71c1b; }

        .image-modal {
            display: none; position: fixed; z-index: 2000;
            padding-top: 50px; left: 0; top: 0;
            width: 100%; height: 100%; overflow: auto;
            background-color: rgba(8, 74, 154, 0.95);
        }
        .image-modal-content {
            margin: auto; display: block; width: 80%;
            max-width: 700px; border-radius: 0.5rem;
        }
        .image-modal-close {
            position: absolute; top: 15px; right: 35px;
            color: #fdebdf; font-size: 40px; font-weight: bold;
            transition: 0.3s; cursor: pointer;
        }
        .image-modal-close:hover, .image-modal-close:focus {
            color: #a71c1b; text-decoration: none;
        }

        .faq-item {
            background-color: rgba(58, 58, 58, 0.2);
            margin-bottom: 0.5rem; border-radius: 0.375rem;
            border: 1px solid #3a3a3a;
        }
        .faq-question {
            padding: 1rem 1.5rem; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center;
            font-family: 'Engebrechtre', sans-serif; font-weight: 600; color: #fdebdf;
        }
        .faq-answer {
            padding: 0 1rem; max-height: 0; overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            color: #e0c9be;
        }
        .faq-answer.active {
            max-height: 300px; padding-top: 1rem; padding-bottom: 1rem;
        }
        .faq-question .icon::before {
            content: '+'; font-size: 1.75rem; transition: transform 0.3s ease;
        }
        .faq-question.active .icon::before { transform: rotate(45deg); }

        .event-card {
            background-color: rgba(58, 58, 58, 0.3); border: 1px solid #3a3a3a;
            color: #fdebdf; display: flex; flex-direction: column;
            justify-content: space-between;
        }
        
        .event-card h3 { font-family: 'Engebrechtre', sans-serif; color: #fdebdf; }
        .event-card p { color: #e0c9be; }
        .event-card .btn { margin-top: auto; }

        .contact-link {
            display: inline-flex; align-items: center;
            background-color: #a71c1b; color: #fdebdf;
            padding: 0.75rem 1.5rem; border-radius: 0.5rem;
            text-decoration: none; font-family: 'Engebrechtre', sans-serif;
            font-weight: 600; transition: background-color 0.3s ease;
            margin: 0.5rem;
        }
        .contact-link:hover { background-color: #8f1716; }
        .contact-link i { margin-right: 0.75rem; font-size: 1.5rem; }

        footer {
            background-size: cover;
            background-position: center center;
            background-repeat: no-repeat;
            color: #fdebdf; 
            border-top: 2px solid #a71c1b; 
            padding: 2rem 1rem; 
            position: relative; 
            text-align: center; 
        }
        footer::before { 
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.6); 
            z-index: 1; 
        }
        footer .footer-content { 
            position: relative;
            z-index: 2;
        }
        footer p { 
            color: #fdebdf; 
            text-shadow: 1px 1px 3px rgba(0,0,0,0.8); 
        }

        #home, #sobre, #lineup, #reservas-section, #local, #agenda, #contato, #faq {
            padding-top: 7rem; padding-bottom: 4rem;
        }
        
        #sobre, #agenda, #local, #faq {
            background-color: rgba(8, 74, 154, 0.80); 
        }
        #lineup { background-color: rgba(0,0,0,0.3); } 
        #reservas-section { background-color: rgba(0,0,0,0.5); } 
        #contato { background-color: rgba(0,0,0,0.2); } 

        #local .map-container { margin-bottom: 3rem; }
        #local .map-container:last-child { margin-bottom: 0; }

        .garden-logo-card {
            height: 60px; width: auto; margin-bottom: 0.5rem;
        }

    </style>
</head>
<body class="antialiased">

    <header class="fixed-header">
        <div class="container mx-auto px-6 flex flex-col sm:flex-row justify-between items-center">
            <a href="#home" class="mb-2 sm:mb-0">
                <img id="headerFuzueLogo" src="https://placehold.co/150x50/084a9a/fdebdf?text=Fuzuê&font=engebrechtre" alt="[Logo Fuzuê Bar]" class="header-logo">
            </a>
            <nav>
                <ul class="flex flex-wrap justify-center space-x-1 sm:space-x-2 md:space-x-3 lg:space-x-4 text-sm sm:text-base">
                    <li><a href="#sobre">Sobre Nós</a></li>
                    <li><a id="cardapio-link" href="#" target="_blank">Cardápio</a></li>
                    <li><a href="#agenda">Agenda</a></li>
                    <li><a href="#reservas-section">Reservas</a></li>
                    <li><a href="#local">Localização</a></li>
                    <li><a href="#contato">Contato</a></li>
                    <li><a href="#faq">Dúvidas</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section id="home" class="hero-bg min-h-screen flex flex-col items-center justify-center text-center p-6">
        <div class="scroll-animate">
            <img id="homeFuzueLogo" src="https://placehold.co/300x100/084a9a/fdebdf?text=FUZUÊ+BAR&font=engebrechtre" alt="[Logo Principal Fuzuê Bar]" class="home-logo mx-auto">
            <p class="text-xl md:text-2xl text-fdebdf mb-4">Bar & Comidinhas!</p>
            <p class="text-lg md:text-xl font-semibold text-fdebdf mb-2">Quarta, Quinta e Domingo: 18:00 às 00:00</p>
            <p class="text-lg md:text-xl font-semibold text-fdebdf mb-10">Sexta e Sábado: 18:00 às 01:00</p>
            <a href="#reservas-section" class="btn btn-primary font-bold py-4 px-10 text-xl">
                FAÇA SUA RESERVA!
            </a>
        </div>
    </section>

    <section id="sobre" class="py-20 px-6">
        <div class="container mx-auto max-w-4xl text-center">
            <div class="scroll-animate">
                <h2 class="text-4xl mb-10 section-title">SOBRE O BAR</h2>
                <p class="text-lg leading-relaxed mb-6"> Bem-vindo ao Fuzuê Bar, o seu novo ponto de encontro para momentos inesquecíveis! Aqui, a vibe é contagiante, as comidinhas são de dar água na boca e os drinks são preparados com maestria. Um lugar perfeito para relaxar após o trabalho, celebrar com amigos ou simplesmente curtir a noite.
                </p>
                <p class="text-lg leading-relaxed mb-12"> Com ambientes pensados para o seu conforto e DJs que comandam as pick-ups com o melhor da música, o Fuzuê é mais que um bar, é uma experiência completa. Venha fazer parte desse fuzuê!
                </p>

                <h3 class="text-3xl section-title mb-8">GALERIA DE FOTOS</h3>
                <div class="carousel-container scroll-animate">
                    <div class="carousel-slide active">
                        <img id="galleryImage1" src="https://placehold.co/800x600/084a9a/fdebdf?text=Carregando+Foto+1...&font=engebrechtre" alt="[Foto de cliente no Fuzuê]" onclick="openImageModal(this.src)">
                    </div>
                    <div class="carousel-slide">
                        <img id="galleryImage2" src="https://placehold.co/800x600/a71c1b/fdebdf?text=Carregando+Foto+2...&font=engebrechtre" alt="[Foto de comida do Fuzuê]" onclick="openImageModal(this.src)">
                    </div>
                    <div class="carousel-slide">
                        <img id="galleryImage3" src="https://placehold.co/800x600/3a3a3a/fdebdf?text=Carregando+Foto+3...&font=engebrechtre" alt="[Imagem da promoção de Quarta-feira]" onclick="openImageModal(this.src)">
                    </div>
                    <!-- Exemplo de novo slide:
                    <div class="carousel-slide">
                        <img src="URL_DA_SUA_NOVA_IMAGEM_AQUI" alt="[Descrição da Nova Imagem]" onclick="openImageModal(this.src)">
                    </div>
                    -->
                    <div class="carousel-nav-buttons">
                        <button class="carousel-prev" onclick="changeSlide(-1); resetCarouselInterval();">❮ ANTERIOR</button>
                        <button class="carousel-next" onclick="changeSlide(1); resetCarouselInterval();">PRÓXIMO ❯</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="imageModal" class="image-modal">
        <span class="image-modal-close" onclick="closeImageModal()" aria-label="Fechar imagem">×</span>
        <img class="image-modal-content" id="modalImage" alt="[Imagem Ampliada]">
    </div>

    <section id="agenda" class="py-20 px-6">
        <div class="container mx-auto">
            <h2 class="text-4xl text-center mb-16 section-title scroll-animate">AGENDA DE EVENTOS</h2>
            <div id="eventos-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="event-card rounded-xl p-6 text-center scroll-animate"> <img src="https://placehold.co/400x250/a71c1b/fdebdf?text=Sextou+no+Club&font=engebrechtre" alt="[Imagem do Evento Sextou no Club]" class="w-full h-48 object-cover rounded-md mx-auto mb-6"> <h3 class="text-2xl font-bold mb-2">Sextou no Club!</h3>
                    <p class="text-accent-red font-semibold mb-2">Toda Sexta, 20:00</p>
                    <p class="text-sm mb-4">Comece o fim de semana com o pé direito! Música ao vivo, promoções de drinks e a melhor vibe da cidade.</p>
                    <a href="#reservas-section" class="btn btn-primary py-2 px-4 text-sm">Reservar Mesa</a>
                </div>
                <div class="event-card rounded-xl p-6 text-center scroll-animate" style="transition-delay: 0.2s;">
                    <img src="https://placehold.co/400x250/084a9a/fdebdf?text=Sábado+Com+Pulseiras&font=engebrechtre" alt="[Imagem do Evento Sábado Com Pulseiras]" class="w-full h-48 object-cover rounded-md mx-auto mb-6">
                    <h3 class="text-2xl font-bold mb-2">Sábado Com Pulseiras</h3>
                    <p class="text-accent-red font-semibold mb-2">Todo Sábado, 21:00</p>
                    <p class="text-sm mb-4">Uma mistura de ritmos com nossos DJs convidados, do eletrônico ao pop. A noite perfeita para dançar!</p>
                    <a href="#reservas-section" class="btn btn-primary py-2 px-4 text-sm">Reservar Mesa</a>
                </div>
                <div class="event-card rounded-xl p-6 text-center scroll-animate" style="transition-delay: 0.4s;">
                    <img src="https://placehold.co/400x250/3a3a3a/fdebdf?text=Domingo+JAM&font=engebrechtre" alt="[Imagem do Evento Domingo JAM]" class="w-full h-48 object-cover rounded-md mx-auto mb-6">
                    <h3 class="text-2xl font-bold mb-2">Domingo JAM</h3>
                    <p class="text-accent-red font-semibold mb-2">Todo Domingo, 18:00</p>
                    <p class="text-sm mb-4">Feche o fim de semana com chave de ouro. Ambiente tranquilo, petiscos deliciosos e música ambiente.</p>
                    <a href="#reservas-section" class="btn btn-primary py-2 px-4 text-sm">Ver Detalhes</a>
                </div>
            </div>
        </div>
    </section>

    <section id="lineup" class="py-20 px-6">
        <div class="container mx-auto">
            <h2 class="text-4xl font-bold text-center mb-16 section-title scroll-animate">NOSSOS DJs RESIDENTES</h2>
            <div id="djs-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                <div class="dj-card rounded-xl overflow-hidden p-6 text-center scroll-animate">
                    <img id="djEveronImage" src="https://placehold.co/400x400/a71c1b/084a9a?text=DJ+Everon&font=engebrechtre" alt="[Foto do DJ Everon]" class="w-48 h-48 md:w-56 md:h-56 rounded-full mx-auto mb-6 border-4 border-accent-red object-cover">
                    <h3 class="text-3xl font-bold mb-2"><a href="https://www.instagram.com/everonmusic/" target="_blank" rel="noopener noreferrer">Dj Everon</a></h3>
                    <p class="text-red-500 font-semibold mb-4">House / Deep House</p>
                    <p class="text-sm mb-6 px-4">Com sets vibrantes que misturam clássicos e as últimas novidades da cena eletrônica.</p>
                    <audio id="audio-dj-everon" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"></audio>
                    <button onclick="togglePlay('audio-dj-everon', this)" class="play-button btn btn-primary py-3 px-6 rounded-md font-semibold flex items-center justify-center mx-auto w-auto sm:w-48">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                        <span class="button-text">Ouvir Prévia</span>
                    </button>
                </div>
                <div class="dj-card rounded-xl overflow-hidden p-6 text-center scroll-animate" style="transition-delay: 0.2s;">
                     <img id="djDefariasImage" src="https://placehold.co/400x400/084a9a/fdebdf?text=DJ+DeFarias&font=engebrechtre" alt="[Foto da DJ DeFarias]" class="w-48 h-48 md:w-56 md:h-56 rounded-full mx-auto mb-6 border-4 border-accent-red object-cover">
                    <h3 class="text-3xl font-bold mb-2"><a href="https://www.instagram.com/defariasmusic/" target="_blank" rel="noopener noreferrer">DJ DeFarias</a></h3>
                    <p class="text-red-500 font-semibold mb-4">Indie Dance / Nu Disco</p>
                    <p class="text-sm mb-6 px-4">Trazendo batidas contagiantes e uma energia única para suas noites no Fuzuê.</p>
                    <audio id="audio-dj-defarias" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"></audio>
                    <button onclick="togglePlay('audio-dj-defarias', this)" class="play-button btn btn-primary py-3 px-6 rounded-md font-semibold flex items-center justify-center mx-auto w-auto sm:w-48">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                        <span class="button-text">Ouvir Prévia</span>
                    </button>
                </div>
                <div class="dj-card rounded-xl overflow-hidden p-6 text-center scroll-animate" style="transition-delay: 0.4s;">
                     <img id="djRafiuskImage" src="https://placehold.co/400x400/3a3a3a/fdebdf?text=DJ+Rafiusk&font=engebrechtre" alt="[Foto do DJ Rafiusk]" class="w-48 h-48 md:w-56 md:h-56 rounded-full mx-auto mb-6 border-4 border-accent-red object-cover">
                    <h3 class="text-3xl font-bold mb-2"><a href="https://www.instagram.com/rafaelsantiag_/" target="_blank" rel="noopener noreferrer">DJ Rafiusk</a></h3>
                    <p class="text-red-500 font-semibold mb-4">Tech House / Progressive</p>
                    <p class="text-sm mb-6 px-4">Para quem curte um som mais conceitual e batidas marcantes até o amanhecer.</p>
                    <audio id="audio-dj-rafiusk" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3"></audio>
                    <button onclick="togglePlay('audio-dj-rafiusk', this)" class="play-button btn btn-primary py-3 px-6 rounded-md font-semibold flex items-center justify-center mx-auto w-auto sm:w-48">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                        <span class="button-text">Ouvir Prévia</span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <section id="reservas-section" class="py-20 px-6">
        <div class="container mx-auto">
            <h2 class="text-4xl font-bold text-center mb-16 section-title scroll-animate">RESERVE SUA MESA OU ENTRADA</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 max-w-7xl mx-auto">
                <div class="bg-accent-red p-8 rounded-xl shadow-2xl transform hover:scale-105 transition-transform duration-300 scroll-animate">
                    <h3 class="text-3xl font-title font-bold text-fdebdf mb-4 text-center">Área Externa (Frente)</h3>
                    <p class="text-gray-100 text-center mb-6">Ideal para quem gosta de movimento e ver a rua.</p>
                    <ul class="text-gray-100 space-y-2 mb-8 text-center">
                        <li>Capacidade: até 70 pessoas</li>
                        <li>DJ na área externa</li>
                        <li>Ambiente aberto</li>
                        <li>Próximo ao banheiro interno</li>
                    </ul>
                    <button data-area="Área Externa (Frente)" class="btn btn-secondary block w-full text-center font-bold py-4 px-6 text-lg open-modal-button">
                        Reservar Mesa
                    </button>
                </div>
                <div class="bg-accent-red p-8 rounded-xl shadow-2xl transform hover:scale-105 transition-transform duration-300 scroll-animate" style="transition-delay: 0.1s;">
                    <h3 class="text-3xl font-title font-bold text-fdebdf mb-4 text-center">Área Interna</h3>
                    <p class="text-gray-100 text-center mb-6">Conforto e acesso fácil às mesas de sinuca.</p>
                    <ul class="text-gray-100 space-y-2 mb-8 text-center">
                        <li>Capacidade: até 50 pessoas</li>
                        <li>Acesso às mesas de sinuca</li>
                        <li>Ambiente climatizado</li>
                        <li>Próximo ao banheiro interno</li>
                    </ul>
                    <button data-area="Área Interna" class="btn btn-secondary block w-full text-center font-bold py-4 px-6 text-lg open-modal-button">
                        Reservar Mesa
                    </button>
                </div>
                <div class="bg-accent-red p-8 rounded-xl shadow-2xl transform hover:scale-105 transition-transform duration-300 scroll-animate" style="transition-delay: 0.2s;">
                    <img id="gardenLogoCard" src="https://placehold.co/100x60/a71c1b/fdebdf?text=Garden&font=engebrechtre" alt="[Logo Fuzuê Garden]" class="garden-logo-card mx-auto">
                    <p class="text-gray-100 text-center mb-6">Nosso espaço mais amplo e descolado, com DJ exclusivo.</p>
                    <ul class="text-gray-100 space-y-2 mb-8 text-center">
                        <li>Capacidade: até 120 pessoas</li>
                        <li>DJ exclusivo no Garden</li>
                        <li>Próximo ao banheiro externo</li>
                        <li>Ambiente amplo e aberto</li>
                    </ul>
                    <button data-area="Garden (Fundos)" class="btn btn-secondary block w-full text-center font-bold py-4 px-6 text-lg open-modal-button">
                        Reservar Mesa
                    </button>
                </div>
                <div class="bg-accent-gray p-8 rounded-xl shadow-2xl transform hover:scale-105 transition-transform duration-300 scroll-animate" style="transition-delay: 0.3s;">
                    <h3 class="text-3xl font-title font-bold text-fdebdf mb-4 text-center">Entrada Fuzuê Club</h3>
                    <p class="text-gray-100 text-center mb-6">Garanta seu acesso à noite mais agitada da cidade!</p>
                    <ul class="text-gray-100 space-y-2 mb-8 text-center">
                        <li>Acesso ao Club (20:00 - 01:00)</li>
                        <li>DJs e muita música</li>
                        <li>Quinta a Domingo</li>
                        <li>Consulte valores na portaria</li>
                    </ul>
                    <button data-area="Entrada Fuzuê Club" class="btn btn-primary block w-full text-center font-bold py-4 px-6 text-lg open-modal-button">
                        Reservar Entrada
                    </button>
                </div>
            </div>
            <p class="text-center mt-12 scroll-animate">
                Garanta sua mesa ou entrada e evite filas! As reservas são limitadas.
            </p>
        </div>
    </section>

    <div id="reserva-modal" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 hidden p-4">
        <div class="bg-white rounded-lg shadow-xl p-6 sm:p-8 w-full max-w-md relative">
            <button onclick="fecharModal()" class="absolute top-3 right-3 text-gray-500 hover:text-accent-red text-3xl font-light" aria-label="Fechar modal">×</button>
            <h2 class="text-2xl font-bold mb-6 text-center">Detalhes da Reserva</h2>
            <form id="form-reserva" class="space-y-4">
                <div>
                    <label for="nome" class="block text-sm font-medium modal-label">Nome completo</label>
                    <input name="nome" id="nome" type="text" class="modal-input w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-accent-red focus:border-accent-red" required>
                </div>
                <div>
                    <label for="cpf" class="block text-sm font-medium modal-label">CPF</label>
                    <input name="cpf" id="cpf" type="text" placeholder="000.000.000-00" class="modal-input w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-accent-red focus:border-accent-red" required>
                </div>
                <div>
                    <label for="telefone" class="block text-sm font-medium modal-label">Telefone / WhatsApp</label>
                    <input name="telefone" id="telefone" type="tel" placeholder="(XX) XXXXX-XXXX" class="modal-input w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-accent-red focus:border-accent-red" required>
                </div>
                <div>
                    <label for="area-input" class="block text-sm font-medium modal-label">Área / Tipo de Reserva</label>
                    <input name="area" id="area-input" type="text" class="modal-input w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 cursor-not-allowed" readonly required>
                </div>
                <div id="quantidade-pessoas-field-container" class="quantidade-pessoas-field">
                    <label for="quantidade" class="block text-sm font-medium modal-label">Quantidade de pessoas</label>
                    <input name="quantidade" id="quantidade" type="number" min="1" max="20" placeholder="Ex: 4" class="modal-input w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-accent-red focus:border-accent-red" required>
                </div>
                 <div>
                    <label for="data-reserva" class="block text-sm font-medium modal-label">Data da Reserva</label>
                    <input name="dataReserva" id="data-reserva" type="date" class="modal-input w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-accent-red focus:border-accent-red" required>
                </div>
                <button type="submit" id="submit-reserva-button" class="w-full btn btn-primary font-bold py-3 rounded-md text-lg">
                    Confirmar Reserva
                </button>
            </form>
            <div id="reserva-feedback" class="text-center mt-4 text-sm"></div>
        </div>
    </div>

    <section id="local" class="py-20 px-6 text-center">
        <div class="container mx-auto scroll-animate">
            <h2 class="text-4xl mb-16 section-title">NOSSA LOCALIZAÇÃO</h2>
            <div class="grid md:grid-cols-2 gap-12 items-start">
                <div class="map-container">
                    <h3 class="text-3xl mb-4 font-title text-fdebdf">FUZUÊ BAR</h3>
                    <p class="text-lg text-gray-300 mb-6">Rua Barão de Aracati, 609 - Meireles<br>Fortaleza - CE</p>
                    <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden shadow-2xl border-2 border-accent-red/50">
                        <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3981.338380765498!2d-38.5074993852409!3d-3.731845297276289!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x7c7488070000001%3A0xba8641a3678d3808!2sR.%20Bar%C3%A3o%20de%20Aracati%2C%20609%20-%20Meireles%2C%20Fortaleza%20-%20CE%2C%2060115-000!5e0!3m2!1spt-BR!2sbr!4v1678886600000!5m2!1spt-BR!2sbr" 
                            width="100%" height="400" style="border:0;"
                            allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>
                <div class="map-container">
                    <h3 class="text-3xl mb-4 font-title text-fdebdf">FUZUÊ CLUB</h3>
                    <p class="text-lg text-gray-300 mb-6">R. José Avelino, 349 - Centro<br>Fortaleza - CE</p>
                    <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden shadow-2xl border-2 border-accent-red/50">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d15925.56656636544!2d-38.52536440260928!3d-3.7244809399905012!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x7c749bb45e4eff9%3A0x14ac3551828131a8!2sFuzu%C3%AA%20Club!5e0!3m2!1spt-BR!2sbr!4v1748204977206!5m2!1spt-BR!2sbr" 
                            width="100%" height="400" style="border:0;" 
                            allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="contato" class="py-20 px-6">
        <div class="container mx-auto text-center">
            <h2 class="text-4xl mb-12 section-title scroll-animate">ENTRE EM CONTATO</h2>
            <div class="flex flex-wrap justify-center gap-4 md:gap-6 scroll-animate">
                <a href="https://instagram.com/fuzue.bar" target="_blank" class="contact-link">
                    <i class="fab fa-instagram"></i> @fuzue.bar
                </a>
                <a href="https://instagram.com/fuzue.club" target="_blank" class="contact-link">
                    <i class="fab fa-instagram"></i> @fuzue.club
                </a>
                <a href="https://wa.me/5585997751777" target="_blank" class="contact-link">
                    <i class="fab fa-whatsapp"></i> Fale Conosco
                </a>
                <a href="https://open.spotify.com/user/example" target="_blank" class="contact-link">
                    <i class="fab fa-spotify"></i> Nossa Playlist no Spotify
                </a>
                <a href="https://youtube.com/c/example" target="_blank" class="contact-link">
                    <i class="fab fa-youtube"></i> Nosso Canal no YouTube
                </a>
            </div>
        </div>
    </section>

    <section id="faq" class="py-20 px-6">
        <div class="container mx-auto max-w-3xl">
            <h2 class="text-4xl text-center mb-12 section-title scroll-animate">DÚVIDAS FREQUENTES</h2>
            <div class="space-y-4 scroll-animate">
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Qual a média de preço das bebidas e comidas?</span>
                        <span class="icon"></span>
                    </div>
                    <div class="faq-answer">
                        <p>Nossos drinks variam entre R$25 e R$45. As porções e petiscos têm preços a partir de R$30. Consulte nosso cardápio completo <a id="faq-cardapio-link" href="#" target="_blank" class="text-accent-red hover:underline">clicando aqui</a>.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Como funciona o Happy Hour?</span>
                        <span class="icon"></span>
                    </div>
                    <div class="faq-answer">
                        <p>Nosso Happy Hour acontece de Quarta a Domingo, das 18:00 às 20:00, com descontos especiais em drinks selecionados e promoções de petiscos.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Preciso fazer reserva?</span>
                        <span class="icon"></span>
                    </div>
                    <div class="faq-answer">
                        <p>Recomendamos fazer reserva, especialmente às sextas e sábados, para garantir sua mesa ou entrada. Faça sua reserva <a href="#reservas-section" class="text-accent-red hover:underline">clicando aqui</a>.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>O bar possui estacionamento?</span>
                        <span class="icon"></span>
                    </div>
                    <div class="faq-answer">
                        <p>Não possuímos estacionamento próprio, mas há vagas na rua e estacionamentos privados próximos.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Qual o estilo de música predominante?</span>
                        <span class="icon"></span>
                    </div>
                    <div class="faq-answer">
                        <p>Nossa programação é variada! Temos noites com DJs (House, Nu Disco, Tech House) e dias com Sertanejo e outros ritmos. Confira nossa <a href="#agenda" class="text-accent-red hover:underline">agenda</a>!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-10 text-center"> <div class="footer-content"> <p>© <span id="currentYear"></span> Fuzuê Bar. Todos os direitos reservados.</p>
            <p class="text-sm mt-1">Organização: Trippy Co.</p>
        </div>
    </footer>

    <script type="module">
        // Importações do Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        // Tenta carregar configurações do ambiente do Canvas
        const firebaseConfigFromGlobal = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthTokenFromGlobal = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        // Usa configurações do config.js se as globais do Canvas não estiverem disponíveis
        // ou se window.firebaseConfigFallback estiver definido (indicando que config.js carregou)
        const finalFirebaseConfig = firebaseConfigFromGlobal || window.firebaseConfigFallback;
        const GOOGLE_APPS_SCRIPT_URL = typeof window.GOOGLE_APPS_SCRIPT_URL_CONFIG !== 'undefined' ? window.GOOGLE_APPS_SCRIPT_URL_CONFIG : 'https://script.google.com/macros/s/AKfycbw_R3gZ253qL3Fef53FNYE7ss2P_6hA5q1r2s2Uu_xYc39L8yB9l_2Xn4v8gK2jN9zQ/exec'; // URL real adicionada
        const appIdFromGlobal = typeof __app_id !== 'undefined' ? __app_id : (typeof window.DEFAULT_APP_ID_CONFIG !== 'undefined' ? window.DEFAULT_APP_ID_CONFIG : 'default-fuzuebar-app-v12-configfile');
        const adminWhatsAppNumber = typeof window.ADMIN_WHATSAPP_NUMBER_CONFIG !== 'undefined' ? window.ADMIN_WHATSAPP_NUMBER_CONFIG : "5500000000000"; // Fallback seguro

        if (!finalFirebaseConfig) {
            console.error("Configuração do Firebase não encontrada. Verifique config.js ou as variáveis globais do ambiente.");
        }
        
        let app;
        let db;
        let auth;
        let userId;

        const storageBucketBaseUrl = `https://firebasestorage.googleapis.com/v0/b/${finalFirebaseConfig.storageBucket}/o/`;
        const fuzueLogoPath = "Untitled_design-removebg-preview.png";
        const fuzueLogoUrl = `${storageBucketBaseUrl}${encodeURIComponent(fuzueLogoPath)}?alt=media`;
        const gardenLogoPath = "LOGOS_FUZUE-03.png";
        const gardenLogoUrl = `${storageBucketBaseUrl}${encodeURIComponent(gardenLogoPath)}?alt=media`;
        const cardapioFilePath = "Cardapio.pdf"; 
        const cardapioPdfUrl = `${storageBucketBaseUrl}${encodeURIComponent(cardapioFilePath)}?alt=media`;
        const wallpaperFileName = "canva_fuz (2).png"; // Atualizado conforme solicitado
        const wallpaperUrl = `${storageBucketBaseUrl}${encodeURIComponent(wallpaperFileName)}?alt=media`;
        const footerImageFileName = "footer - fuzue.png";
        const footerImageUrl = `${storageBucketBaseUrl}${encodeURIComponent(footerImageFileName)}?alt=media`;
        const galleryImg1Path = "baby devil fuz.jpg";
        const galleryImg1Url = `${storageBucketBaseUrl}${encodeURIComponent(galleryImg1Path)}?alt=media`;
        const galleryImg2Path = "comida fuz.jpg";
        const galleryImg2Url = `${storageBucketBaseUrl}${encodeURIComponent(galleryImg2Path)}?alt=media`;
        const galleryImg3Path = "promo quarta fuz.jpg";
        const galleryImg3Url = `${storageBucketBaseUrl}${encodeURIComponent(galleryImg3Path)}?alt=media`;

        // Novas URLs para imagens dos DJs
        const djEveronImagePath = "foto_everon.jpg";
        const djEveronImageUrl = `${storageBucketBaseUrl}${encodeURIComponent(djEveronImagePath)}?alt=media`;
        const djDefariasImagePath = "defarias.jpg";
        const djDefariasImageUrl = `${storageBucketBaseUrl}${encodeURIComponent(djDefariasImagePath)}?alt=media`;
        const djRafiuskImagePath = "rafiusk.jpg";
        const djRafiuskImageUrl = `${storageBucketBaseUrl}${encodeURIComponent(djRafiuskImagePath)}?alt=media`;


        document.addEventListener('DOMContentLoaded', () => {
            document.body.style.backgroundImage = `url('${wallpaperUrl}')`; 
            
            const footerEl = document.querySelector('footer');
            if (footerEl) {
                footerEl.style.backgroundImage = `url('${footerImageUrl}')`;
            } else {
                console.warn("Elemento footer não encontrado para aplicar imagem de fundo.");
            }

            const headerFuzueLogoEl = document.getElementById('headerFuzueLogo');
            if (headerFuzueLogoEl) headerFuzueLogoEl.src = fuzueLogoUrl;
            const homeFuzueLogoEl = document.getElementById('homeFuzueLogo');
            if (homeFuzueLogoEl) homeFuzueLogoEl.src = fuzueLogoUrl;
            const gardenLogoCardEl = document.getElementById('gardenLogoCard');
            if (gardenLogoCardEl) gardenLogoCardEl.src = gardenLogoUrl;
            const cardapioLinkHeader = document.getElementById('cardapio-link');
            if (cardapioLinkHeader) cardapioLinkHeader.href = cardapioPdfUrl;
            const cardapioLinkFaq = document.getElementById('faq-cardapio-link');
            if (cardapioLinkFaq) cardapioLinkFaq.href = cardapioPdfUrl;
            
            const galleryImage1El = document.getElementById('galleryImage1');
            if (galleryImage1El) galleryImage1El.src = galleryImg1Url;
            const galleryImage2El = document.getElementById('galleryImage2');
            if (galleryImage2El) galleryImage2El.src = galleryImg2Url;
            const galleryImage3El = document.getElementById('galleryImage3');
            if (galleryImage3El) galleryImage3El.src = galleryImg3Url;

            // Define as imagens dos DJs
            const djEveronImageEl = document.getElementById('djEveronImage');
            if (djEveronImageEl) djEveronImageEl.src = djEveronImageUrl;
            const djDefariasImageEl = document.getElementById('djDefariasImage');
            if (djDefariasImageEl) djDefariasImageEl.src = djDefariasImageUrl;
            const djRafiuskImageEl = document.getElementById('djRafiuskImage');
            if (djRafiuskImageEl) djRafiuskImageEl.src = djRafiuskImageUrl;

            // --- CAROUSEL LOGIC START ---
            const slides = document.querySelectorAll(".carousel-slide");
            const carouselPrevBtn = document.querySelector('.carousel-prev');
            const carouselNextBtn = document.querySelector('.carousel-next');
            let slideIndex = 0;
            let carouselInterval;

            function showSlidesInternal() { 
                if (slides.length === 0) {
                    if(carouselPrevBtn) carouselPrevBtn.style.display = 'none';
                    if(carouselNextBtn) carouselNextBtn.style.display = 'none';
                    return;
                }
                if(carouselPrevBtn) carouselPrevBtn.style.display = 'inline-block';
                if(carouselNextBtn) carouselNextBtn.style.display = 'inline-block';
                
                slides.forEach(s => s.classList.remove('active'));
                slideIndex = (slideIndex % slides.length + slides.length) % slides.length;
                if (slides[slideIndex]) {
                    slides[slideIndex].classList.add('active');
                }
            }
            
            function startCarouselAutoPlayInternal() { 
                if (slides.length > 0) {
                    clearInterval(carouselInterval);
                    carouselInterval = setInterval(() => {
                        window.changeSlide(1); 
                    }, 5000);
                }
            }

            window.changeSlide = (n) => { 
                slideIndex += n; 
                showSlidesInternal(); 
            };

            window.resetCarouselInterval = () => {
                clearInterval(carouselInterval);
                startCarouselAutoPlayInternal();
            };
            
            if (slides.length > 0) {
                showSlidesInternal(); 
                startCarouselAutoPlayInternal(); 
            } else {
                if (carouselPrevBtn) carouselPrevBtn.style.display = 'none';
                if (carouselNextBtn) carouselNextBtn.style.display = 'none';
            }
            // --- CAROUSEL LOGIC END ---
        });

        if (finalFirebaseConfig) { 
            try {
                app = initializeApp(finalFirebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                if (initialAuthTokenFromGlobal) {
                    await signInWithCustomToken(auth, initialAuthTokenFromGlobal);
                } else {
                    await signInAnonymously(auth);
                }
                userId = auth.currentUser ? auth.currentUser.uid : crypto.randomUUID();
                console.log("Firebase UserID:", userId, "AppID:", appIdFromGlobal);
            } catch (error) {
                console.error("Firebase: Erro ao inicializar ou autenticar:", error);
                const reservaFeedbackEl = document.getElementById('reserva-feedback');
                if (reservaFeedbackEl) {
                    reservaFeedbackEl.innerHTML = `<p class="text-accent-red font-semibold">Erro na conexão com o sistema de reservas. Tente novamente mais tarde.</p>`;
                }
                document.querySelectorAll('.open-modal-button').forEach(btn => btn.disabled = true);
                const submitReservaBtn = document.getElementById('submit-reserva-button');
                if (submitReservaBtn) submitReservaBtn.disabled = true;
            }
        }
        
        async function sendReservationToGoogleSheet(data) {
             if (GOOGLE_APPS_SCRIPT_URL === 'SEU_URL_DO_APPS_SCRIPT_AQUI_FALLBACK' || GOOGLE_APPS_SCRIPT_URL === 'SEU_URL_DO_APPS_SCRIPT_AQUI' || !GOOGLE_APPS_SCRIPT_URL) {
                console.warn("URL do Google Apps Script não configurado. Envio para planilha ignorado.");
                return { success: false, message: "Integração com planilhas não configurada." };
            }
            try {
                const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
                    method: 'POST', mode: 'cors', headers: { 'Content-Type': 'application/json', },
                    body: JSON.stringify(data),
                });
                const textResponse = await response.text();
                try {
                    const result = JSON.parse(textResponse);
                     if (result.status === "success") return { success: true, message: result.message };
                     else return { success: false, message: result.message || "Erro Apps Script." };
                } catch (e) { return { success: false, message: "Resposta inválida do servidor de planilhas." }; }
            } catch (error) { return { success: false, message: `Erro de rede: ${error.toString()}` }; }
        }
        /* Apps Script Example (certifique-se que o URL da sua planilha está correto no script):
        function doPost(e) {
          var lock = LockService.getScriptLock(); lock.waitLock(30000);
          try {
            var sheetUrl = "https://docs.google.com/spreadsheets/d/1KZEfffouenjtmBRUclSY-ea_0_d9GwROY7KMQlX-qx4/edit"; // SEU URL DA PLANILHA
            var ss = SpreadsheetApp.openByUrl(sheetUrl);
            var data = JSON.parse(e.postData.contents);
            var reservaDate = new Date(data.dataReserva + "T00:00:00");
            if (isNaN(reservaDate.getTime())) { throw new Error("Data inválida: " + data.dataReserva); }
            var days = ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'];
            var sheetName = days[reservaDate.getDay()] + " " + Utilities.formatDate(reservaDate, Session.getScriptTimeZone(), "dd-MM-yyyy");
            var sheet = ss.getSheetByName(sheetName);
            if (!sheet) {
              sheet = ss.insertSheet(sheetName);
              sheet.appendRow(["Timestamp", "Nome", "CPF", "Telefone", "Área/Entrada", "Qtd", "Data Reserva", "Status", "Firebase ID"]);
              sheet.getRange("A:A").setNumberFormat("dd/MM/yyyy HH:mm:ss");
            }
            sheet.appendRow([data.submissionTimestamp ? new Date(data.submissionTimestamp) : new Date(), data.nome, data.cpf, data.telefone, data.areaOuEntrada, data.quantidade, data.dataReserva, data.status || "Pendente", data.firebaseId || ""]);
            lock.releaseLock(); return ContentService.createTextOutput(JSON.stringify({status: "success", message: "Reserva adicionada: " + sheetName})).setMimeType(ContentService.MimeType.JSON);
          } catch (error) { Logger.log(error.toString()); if (lock.hasLock()) { lock.releaseLock(); } return ContentService.createTextOutput(JSON.stringify({status: "error", message: error.toString()})).setMimeType(ContentService.MimeType.JSON); }
        }
        */

        const reservaModal = document.getElementById('reserva-modal');
        const formReserva = document.getElementById('form-reserva');
        const areaInput = document.getElementById('area-input');
        const reservaFeedback = document.getElementById('reserva-feedback');
        const dataReservaInput = document.getElementById('data-reserva');
        const cpfInput = document.getElementById('cpf');
        const quantidadePessoasFieldContainer = document.getElementById('quantidade-pessoas-field-container');
        const quantidadeInput = document.getElementById('quantidade');

        const hoje = new Date(); const offset = hoje.getTimezoneOffset();
        const hojeLocal = new Date(hoje.getTime() - (offset*60*1000));
        const hojeISO = hojeLocal.toISOString().split('T')[0];
        if (dataReservaInput) dataReservaInput.setAttribute('min', hojeISO);

        window.abrirModal = function(areaSelecionada) {
            if (!reservaModal || !areaInput || !formReserva || !dataReservaInput || !cpfInput || !quantidadePessoasFieldContainer || !quantidadeInput) return;
            areaInput.value = areaSelecionada; reservaModal.classList.remove('hidden');
            if (reservaFeedback) { reservaFeedback.innerHTML = ''; reservaFeedback.className = 'text-center mt-4 text-sm'; }
            formReserva.reset(); areaInput.value = areaSelecionada; dataReservaInput.value = ''; 

            if (areaSelecionada === "Entrada Fuzuê Club") {
                quantidadePessoasFieldContainer.classList.add('hidden-field');
                quantidadeInput.removeAttribute('required'); quantidadeInput.value = '1'; 
            } else {
                quantidadePessoasFieldContainer.classList.remove('hidden-field');
                quantidadeInput.setAttribute('required', 'required'); 
            }
            const submitButton = document.getElementById('submit-reserva-button');
            if(submitButton) { submitButton.disabled = false; submitButton.textContent = 'Confirmar Reserva'; }
        }
        window.fecharModal = function() { if (reservaModal) reservaModal.classList.add('hidden'); }

        document.querySelectorAll('.open-modal-button').forEach(button => {
            button.addEventListener('click', function() {
                const area = this.dataset.area;
                if (area) abrirModal(area); else console.warn("Botão sem 'data-area'.");
            });
        });

        if (formReserva && finalFirebaseConfig) { 
            formReserva.addEventListener('submit', async function(e) {
                e.preventDefault();
                if (!db) { 
                     if(reservaFeedback) reservaFeedback.innerHTML = `<p class="text-accent-red font-semibold">Sistema de reserva indisponível. Tente mais tarde.</p>`;
                     return;
                }

                const submitButton = document.getElementById('submit-reserva-button');
                if (!submitButton) return;
                submitButton.disabled = true; submitButton.textContent = 'Enviando...';
                if(reservaFeedback) reservaFeedback.innerHTML = '<p class="text-blue-600">Processando...</p>';

                const nome = formReserva.nome.value.trim(); const cpf = formReserva.cpf.value.trim();
                const telefone = formReserva.telefone.value.trim(); const area = formReserva.area.value;
                let quantidade = formReserva.quantidade.value; const dataReserva = formReserva.dataReserva.value;
                if (area === "Entrada Fuzuê Club") quantidade = "1";

                if (!nome || !cpf || !telefone || !area || !dataReserva || (area !== "Entrada Fuzuê Club" && !quantidade) ) {
                    if(reservaFeedback) reservaFeedback.innerHTML = `<p class="text-accent-red font-semibold">Preencha todos os campos.</p>`;
                    submitButton.disabled = false; submitButton.textContent = 'Confirmar Reserva'; return;
                }
                if (new Date(dataReserva) < new Date(hojeISO)) {
                    if(reservaFeedback) reservaFeedback.innerHTML = `<p class="text-accent-red font-semibold">Data no passado.</p>`;
                    submitButton.disabled = false; submitButton.textContent = 'Confirmar Reserva'; return;
                }
                if (!/^\d{3}\.\d{3}\.\d{3}-\d{2}$/.test(cpf) && !/^\d{11}$/.test(cpf)) {
                    if(reservaFeedback) reservaFeedback.innerHTML = `<p class="text-accent-red font-semibold">CPF inválido.</p>`;
                    submitButton.disabled = false; submitButton.textContent = 'Confirmar Reserva'; return;
                }

                const submissionTimestamp = new Date().toISOString();
                let firebaseDocId = null, firebaseSuccess = false, sheetsSuccess = false, sheetsMessage = "";
                const dadosReservaFirebase = { appId: appIdFromGlobal, userId, nome, cpf, telefone, area, quantidade: parseInt(quantidade), dataReserva, status: "Pendente", timestamp: serverTimestamp() };
                try {
                    const docRef = await addDoc(collection(db, `artifacts/${appIdFromGlobal}/public/data/reservas_fuzuebar`), dadosReservaFirebase);
                    firebaseDocId = docRef.id; firebaseSuccess = true;
                } catch (error) { console.error("Erro Firestore: ", error); }

                const dadosParaSheets = { submissionTimestamp, nome, cpf, telefone, areaOuEntrada: area, quantidade: parseInt(quantidade), dataReserva, status: "Pendente Site", firebaseId };
                const sheetsResult = await sendReservationToGoogleSheet(dadosParaSheets);
                sheetsSuccess = sheetsResult.success; sheetsMessage = sheetsResult.message;

                if (firebaseSuccess) {
                    let fbMsg = `<p class="text-green-600 font-semibold">Solicitação registrada (ID: ${firebaseDocId})!</p><p class="text-sm text-gray-700">Entraremos em contato.</p>`;
                    if (GOOGLE_APPS_SCRIPT_URL !== 'SEU_URL_DO_APPS_SCRIPT_AQUI_FALLBACK' && GOOGLE_APPS_SCRIPT_URL !== 'SEU_URL_DO_APPS_SCRIPT_AQUI') {
                        fbMsg += sheetsSuccess ? `<p class="text-sm text-blue-600 mt-1">Detalhes enviados à recepção.</p>` : `<p class="text-sm text-accent-red mt-1">Falha ao enviar à recepção: ${sheetsMessage}.</p>`;
                    }
                    const numWhats = adminWhatsAppNumber; const dataFmt = new Date(dataReserva + 'T00:00:00').toLocaleDateString('pt-BR');
                    const msgWhats = `Nova Reserva Fuzuê:\nNome: ${nome}\nCPF: ${cpf}\nTel: ${telefone}\nÁrea: ${area}\nPessoas: ${quantidade}\nData: ${dataFmt}\nID: ${firebaseDocId}\nConfirmar com cliente.`;
                    fbMsg += `<p class="mt-3 text-sm">Agilize <a href="https://wa.me/${numWhats}?text=${encodeURIComponent(msgWhats)}" target="_blank" class="text-accent-red hover:underline font-semibold">falando com o admin</a>.</p>`;
                    if(reservaFeedback) reservaFeedback.innerHTML = fbMsg; formReserva.reset();
                } else { if(reservaFeedback) reservaFeedback.innerHTML = `<p class="text-accent-red font-semibold">Falha crítica. Tente novamente ou contate o suporte.</p>`; }
                submitButton.disabled = false; submitButton.textContent = 'Confirmar Reserva';
            });
        } else if (!finalFirebaseConfig && formReserva) { 
            if (reservaFeedback) reservaFeedback.innerHTML = `<p class="text-accent-red font-semibold">Serviço de reserva indisponível (config).</p>`;
            const sb = document.getElementById('submit-reserva-button'); if (sb) sb.disabled = true;
        }


        const currentYearEl = document.getElementById('currentYear');
        if (currentYearEl) currentYearEl.textContent = new Date().getFullYear();

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const targetId = this.getAttribute('href');
                if (targetId.startsWith("#") && targetId.length > 1 && this.id!=='cardapio-link' && this.id!=='faq-cardapio-link') {
                    const targetEl = document.querySelector(targetId);
                    if (targetEl) {
                        e.preventDefault(); const header = document.querySelector('.fixed-header');
                        const hOffset = header ? header.offsetHeight : 90;
                        const elPos = targetEl.getBoundingClientRect().top + window.pageYOffset;
                        window.scrollTo({ top: elPos - hOffset, behavior: "smooth" });
                    }
                }
            });
        });

        const scrollElements = document.querySelectorAll('.scroll-animate');
        const elementInView = (el, dividend=1) => el ? el.getBoundingClientRect().top <= (innerHeight || document.documentElement.clientHeight) / dividend : false;
        const displayScrollElement = el => el ? el.classList.add('is-visible') : null;
        let scrollTimeout;
        const handleScrollAnimation = () => {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => scrollElements.forEach(el => { if (elementInView(el, 1.25)) displayScrollElement(el); }), 100);
        };
        window.addEventListener('scroll', handleScrollAnimation);
        document.addEventListener('DOMContentLoaded', () => setTimeout(handleScrollAnimation, 200));

        let currentAudio = null, currentPlayButton = null;
        const playIconSVG = `<svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg> <span class="button-text">Ouvir Prévia</span>`;
        const pauseIconSVG = `<svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <span class="button-text">Pausar</span>`;
        window.togglePlay = function(audioId, btnEl) {
            const audio = document.getElementById(audioId); if (!audio || !btnEl) return;
            if (currentAudio && currentAudio !== audio) { currentAudio.pause(); if(currentPlayButton) currentPlayButton.innerHTML = playIconSVG; }
            if (audio.paused) {
                audio.play().then(() => { btnEl.innerHTML = pauseIconSVG; currentAudio = audio; currentPlayButton = btnEl; }).catch(console.error);
            } else {
                audio.pause(); btnEl.innerHTML = playIconSVG;
                if (currentAudio === audio) { currentAudio = null; currentPlayButton = null; }
            }
            audio.onended = () => { btnEl.innerHTML = playIconSVG; if (currentAudio === audio) { currentAudio = null; currentPlayButton = null; } };
        }

        // Lógica do Carrossel de Imagens (movida para dentro de DOMContentLoaded)
        // As variáveis slideIndex, slides, carouselPrevBtn, carouselNextBtn, carouselInterval
        // e as funções showSlidesInternal, startCarouselAutoPlayInternal, window.changeSlide, window.resetCarouselInterval
        // estão agora definidas dentro do listener DOMContentLoaded.

        const imageModal = document.getElementById("imageModal"), modalImg = document.getElementById("modalImage"), imgModalClose = document.querySelector(".image-modal-close");
        window.openImageModal = src => { if(imageModal && modalImg){ imageModal.style.display="block"; modalImg.src=src; document.body.style.overflow='hidden';}};
        window.closeImageModal = () => { if(imageModal){ imageModal.style.display="none"; document.body.style.overflow='auto';}};
        if(imageModal) imageModal.addEventListener('click', e => { if(e.target == imageModal) closeImageModal(); });
        if(imgModalClose) imgModalClose.addEventListener('click', closeImageModal);
        document.addEventListener('keydown', e => { if(e.key==="Escape" && imageModal && imageModal.style.display==="block") closeImageModal();});

        const faqQuestions = document.querySelectorAll(".faq-question");
        faqQuestions.forEach(q => q.addEventListener("click", () => {
            const answer = q.nextElementSibling;
            if (!answer || !answer.classList.contains('faq-answer')) return;
            const isActive = q.classList.contains("active");
            if(isActive){ q.classList.remove("active"); answer.classList.remove("active"); }
            else { q.classList.add("active"); answer.classList.add("active"); }
        }));
    </script>

</body>
</html>
